# 分組網站 PRD 文件

## 1. 產品目標

提供教師或活動主持人一個方便的分組工具，能根據多種條件（同組 / 不同組 /
男女比例 /
區塊平均分配）自動分組，並支援手動調整、移除、複製與抽組長，提升分組效率與靈活度。

------------------------------------------------------------------------

## 2. 使用流程

1.  使用者進入首頁，輸入男生座號、女生座號，以及分組數量。\
2.  進入「分組預備畫面」，上方顯示所有人員卡片，下方顯示空的分組列表。\
3.  使用者可設定分組條件（同組、不同組、男女比例、區塊平均分配），調整條件排序與是否啟用。\
4.  點擊「分組」按鈕後，跑 3 秒 Loading 動畫，依照條件進行隨機分組。\
5.  顯示分組結果，使用者可手動調整人員、抽組長、複製結果。

------------------------------------------------------------------------

## 3. 功能需求

### 3.1 基礎輸入

-   **男生輸入框**：可輸入數字、逗號、-（如 `1-5,7-9` →
    男1-5號，7-9號）。\
-   **女生輸入框**：同上。\
-   **分組數量輸入框**：輸入數字，預設下一頁的分組數。

------------------------------------------------------------------------

### 3.2 分組預備畫面

-   **上方人員卡片區**
    -   以座號顯示，每張卡片帶性別標記。\
    -   Hover 顯示「X」按鈕，可移除該人。\
    -   Input
        可新增人員（輸入數字與逗號），若輸入已存在座號，顯示錯誤訊息。\
    -   可新增區塊，並將人員卡片拖入不同區塊。
-   **下方分組區**
    -   顯示分組數量的空列表（卡片可拖入）。\
    -   支援拖拉上下移動人員。\
    -   有「分組」按鈕（根據條件自動分組）。

------------------------------------------------------------------------

### 3.3 分組條件

每個條件： - 具備 **toggle 開關**（啟用 / 關閉）。\
- 支援 **拖拉排序**（決定應用優先順序）。

#### 條件種類

1.  **同組條件**
    -   Input 格式：`1-3,4-7,5-6` → 1 與 3 同組，4 與 7 同組，5 與 6
        同組。\
    -   若與其他條件衝突，顯示錯誤訊息，阻止分組。
2.  **不同組條件**
    -   Input 格式：`1-3-5-6-2,4-7` → 1,2,3,5,6 要分在不同組；4 與 7
        不同組。\
    -   驗證：一組不同組條件的人數不能大於分組數。若超出，顯示錯誤訊息並
        disable 分組按鈕。
3.  **男女比例條件**
    -   **自動平均分配**：依照性別數量平均分到各組。\
    -   **自訂比例**：輸入「X男Y女」，系統盡量滿足，剩餘人員依照性別分配到最後幾組。
4.  **區塊平均分配**
    -   若存在多個區塊，盡量平均分散區塊內人員到各組。\
    -   無法完全符合時，剩餘人員隨機分配。

------------------------------------------------------------------------

### 3.4 缺席人員

-   **缺席輸入框**：輸入數字或逗號（如 `3,5,7`）。\
-   這些座號會自動從上方人員列表移除，下方分組時不會出現。

------------------------------------------------------------------------

### 3.5 分組執行

-   點擊「分組」後，顯示 3 秒 Loading 動畫，再顯示結果。\
-   結果展示：
    -   下方分組列表中顯示所有人員卡片。\
    -   使用者可手動拖拉調整成員。

------------------------------------------------------------------------

### 3.6 組長功能

-   **手動選組長**：每組成員卡片可點擊設為組長（顯示皇冠符號）。\
-   **自動抽組長**：按鈕自動為每組隨機選一位組長。

------------------------------------------------------------------------

### 3.7 複製功能

-   **複製格式**：
    -   無組長：

            組別1: [1,3,6,7,8], 組別2: [2,4,9,11,13], ...

    -   有組長（組長座號排在第一位）：

            組別1: [3,1,6,7,8], 組別2: [2,4,9,11,13], ...
-   點擊「Copy」按鈕，將文字複製到剪貼簿。

------------------------------------------------------------------------

## 4. 錯誤處理

-   **條件衝突**：顯示錯誤訊息並阻止分組。\
-   **不同組人數 \> 分組數**：顯示錯誤訊息，disable 分組按鈕。\
-   **新增人員時重複座號**：顯示錯誤訊息，拒絕新增。

------------------------------------------------------------------------

## 5. 非功能性需求

-   UI 要直覺、清楚呈現人員分布與條件設定。\
-   支援桌機與平板瀏覽。\
-   分組演算法需保證結果符合條件，否則阻止執行。
