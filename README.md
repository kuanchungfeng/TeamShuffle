# TeamShuffle - æ™ºæ…§åˆ†çµ„å·¥å…·

ä¸€å€‹åŸºæ–¼ Angular 20 çš„æ™ºæ…§åˆ†çµ„æ‡‰ç”¨ï¼Œå¹«åŠ©æ•™å¸«æˆ–æ´»å‹•ä¸»æŒäººå¿«é€Ÿé€²è¡Œå­¸ç”Ÿåˆ†çµ„ã€‚æ¡ç”¨ **è²¬ä»»éˆæ¨¡å¼ (Chain of Responsibility Pattern)** å¯¦ç¾éˆæ´»ä¸”å¯æ“´å±•çš„åˆ†çµ„ç­–ç•¥ã€‚

## Demo site

https://68d299e83e12a811cce6832b--teamshuffle.netlify.app/

## åŠŸèƒ½ç‰¹è‰²

- ğŸ“ **éˆæ´»è¼¸å…¥**: æ”¯æ´åº§è™Ÿç¯„åœè¼¸å…¥ (å¦‚ 1-5,7-9)
- ğŸ¯ **å¤šç¨®åˆ†çµ„æ¢ä»¶**: åŒçµ„ã€ä¸åŒçµ„ã€ç”·å¥³æ¯”ä¾‹ã€å€å¡Šåˆ†é…
- ğŸ² **æ™ºæ…§åˆ†çµ„**: æ¡ç”¨è²¬ä»»éˆæ¨¡å¼ï¼Œæ ¹æ“šå„ªå…ˆç´šé †åºè™•ç†åˆ†çµ„æ¢ä»¶
- ğŸ‘‘ **çµ„é•·åŠŸèƒ½**: æ‰‹å‹•æŒ‡å®šæˆ–éš¨æ©Ÿé¸å–çµ„é•·
- ğŸ“‹ **çµæœè¤‡è£½**: ä¸€éµè¤‡è£½åˆ†çµ„çµæœ
- ğŸ–±ï¸ **æ‹–æ‹‰èª¿æ•´**: æ”¯æ´æ‹–æ‹‰æ–¹å¼æ‰‹å‹•èª¿æ•´åˆ†çµ„
- ğŸ”— **å¯æ“´å±•æ¶æ§‹**: åŸºæ–¼è²¬ä»»éˆæ¨¡å¼ï¼Œæ˜“æ–¼æ–°å¢åˆ†çµ„ç­–ç•¥

## æŠ€è¡“æ£§

- **Angular 20**: ä¸»è¦æ¡†æ¶ï¼Œä½¿ç”¨æœ€æ–°çš„ Standalone Components æ¶æ§‹
- **Standalone Components**: ç¨ç«‹çµ„ä»¶æ¶æ§‹ï¼Œç„¡éœ€ NgModules
- **Signals**: Angular ä¿¡è™Ÿç”¨æ–¼ç‹€æ…‹ç®¡ç†å’ŒéŸ¿æ‡‰å¼æ•¸æ“š
- **Angular Material**: UI çµ„ä»¶åº«ï¼Œæä¾›ä¸€è‡´çš„ Material Design é«”é©—
- **Tailwind CSS**: å¯¦ç”¨å„ªå…ˆçš„ CSS æ¡†æ¶
- **CDK Drag & Drop**: Angular CDK æ‹–æ‹‰åŠŸèƒ½
- **Bun**: é«˜æ•ˆèƒ½çš„ JavaScript åŸ·è¡Œç’°å¢ƒå’ŒåŒ…ç®¡ç†å™¨
- **è²¬ä»»éˆæ¨¡å¼**: è¨­è¨ˆæ¨¡å¼å¯¦ç¾å¯æ“´å±•çš„åˆ†çµ„ç­–ç•¥è™•ç†

## æ¶æ§‹è¨­è¨ˆ

### è²¬ä»»éˆæ¨¡å¼ (Chain of Responsibility Pattern)

æœ¬å°ˆæ¡ˆæ¡ç”¨è²¬ä»»éˆæ¨¡å¼ä¾†è™•ç†ä¸åŒçš„åˆ†çµ„æ¢ä»¶ï¼Œæ¯å€‹è™•ç†å™¨è² è²¬ç‰¹å®šçš„åˆ†çµ„é‚è¼¯ï¼š

1. **BlockDistributionHandler** - å€å¡Šåˆ†é…è™•ç†å™¨
2. **SameGroupHandler** - åŒçµ„æ¢ä»¶è™•ç†å™¨
3. **DifferentGroupHandler** - ä¸åŒçµ„æ¢ä»¶è™•ç†å™¨
4. **GenderRatioHandler** - æ€§åˆ¥æ¯”ä¾‹è™•ç†å™¨

### è™•ç†æµç¨‹

```
å€å¡Šåˆ†é… â†’ åŒçµ„æ¢ä»¶ â†’ ä¸åŒçµ„æ¢ä»¶ â†’ æ€§åˆ¥æ¯”ä¾‹ â†’ éš¨æ©Ÿåˆ†é…å‰©é¤˜å­¸ç”Ÿ
```

æ¯å€‹è™•ç†å™¨éƒ½å¯ä»¥ï¼š

- è™•ç†ç¬¦åˆè‡ªå·±æ¢ä»¶çš„å­¸ç”Ÿ
- å°‡å‰©é¤˜å­¸ç”Ÿå‚³éçµ¦ä¸‹ä¸€å€‹è™•ç†å™¨
- åœ¨è™•ç†å¤±æ•—æ™‚å°‡æ§åˆ¶æ¬Šå‚³éçµ¦ä¸‹ä¸€å€‹è™•ç†å™¨

è©³ç´°çš„æ¶æ§‹åœ–å’Œæµç¨‹åœ–è«‹åƒè€ƒ [`docs/architecture-diagram.md`](docs/architecture-diagram.md)

## å¿«é€Ÿé–‹å§‹

1. **å®‰è£ Bun**

   ```bash
   curl -fsSL https://bun.sh/install | bash
   ```

2. **å®‰è£ä¾è³´**

   ```bash
   bun install
   ```

3. **å•Ÿå‹•é–‹ç™¼æœå‹™å™¨**

   ```bash
   bun run start
   ```

4. **åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹**
   ```
   http://localhost:4200
   ```

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¤è¨­å®š

- åœ¨é¦–é è¼¸å…¥ç”·ç”Ÿå’Œå¥³ç”Ÿçš„åº§è™Ÿï¼ˆæ”¯æ´ç¯„åœè¼¸å…¥ï¼Œå¦‚ `1-5,7-9`ï¼‰
- è¨­å®šéœ€è¦çš„åˆ†çµ„æ•¸é‡
- é»æ“Šã€Œé–‹å§‹åˆ†çµ„ã€é€²å…¥åˆ†çµ„é é¢

### 2. åˆ†çµ„ç®¡ç†

- **å­¸ç”Ÿç®¡ç†**:

  - å¯ä»¥æ–°å¢æˆ–ç§»é™¤å­¸ç”Ÿ
  - è¨­å®šç¼ºå¸­å­¸ç”Ÿï¼ˆæœƒè‡ªå‹•å¾åˆ†çµ„ä¸­ç§»é™¤ï¼‰
  - æ”¯æ´åº§è™Ÿç¯„åœæ‰¹é‡è¼¸å…¥

- **åˆ†çµ„æ¢ä»¶è¨­å®š**ï¼ˆæŒ‰å„ªå…ˆç´šé †åºè™•ç†ï¼‰:
  - **å€å¡Šåˆ†é…**: å°‡åº§ä½å€åŸŸï¼ˆå¦‚å‰ä¸­å¾Œæ’ï¼‰çš„å­¸ç”Ÿå¹³å‡åˆ†é…
  - **åŒçµ„æ¢ä»¶**: æŒ‡å®šç‰¹å®šå­¸ç”Ÿå¿…é ˆåœ¨åŒä¸€çµ„ï¼ˆå¦‚ `1-2,3-4-5`ï¼‰
  - **ä¸åŒçµ„æ¢ä»¶**: æŒ‡å®šç‰¹å®šå­¸ç”Ÿä¸èƒ½åœ¨åŒä¸€çµ„ï¼ˆå¦‚ `1-2,3-4`ï¼‰
  - **ç”·å¥³æ¯”ä¾‹**: è‡ªå‹•å¹³è¡¡æˆ–è‡ªè¨‚ç”·å¥³æ¯”ä¾‹åˆ†é…

### 3. åˆ†çµ„åŸ·è¡Œ

- é»æ“Šã€Œè‡ªå‹•åˆ†çµ„ã€æŒ‰éˆ•åŸ·è¡Œæ™ºæ…§åˆ†çµ„
- ç³»çµ±å°‡æŒ‰è²¬ä»»éˆé †åºè™•ç†å„ç¨®æ¢ä»¶
- é¡¯ç¤º 3 ç§’è¼‰å…¥å‹•ç•«æä¾›è¦–è¦ºåé¥‹
- å¯ä»¥æ‰‹å‹•æ‹–æ‹‰èª¿æ•´å­¸ç”Ÿåˆ†çµ„
- æ”¯æ´é‡æ–°åˆ†çµ„åŠŸèƒ½

### 4. çµ„é•·èˆ‡çµæœç®¡ç†

- **çµ„é•·åŠŸèƒ½**:

  - é»æ“Šå­¸ç”Ÿå¯æ‰‹å‹•è¨­å®šçµ„é•·
  - ä½¿ç”¨ã€Œéš¨æ©Ÿçµ„é•·ã€åŠŸèƒ½è‡ªå‹•é¸å–
  - çµ„é•·æœƒæœ‰ç‰¹æ®Šçš„è¦–è¦ºæ¨™ç¤º

- **çµæœè¼¸å‡º**:
  - é»æ“Šã€Œè¤‡è£½çµæœã€å°‡åˆ†çµ„çµæœè¤‡è£½åˆ°å‰ªè²¼ç°¿
  - æ”¯æ´å¤šç¨®è¼¸å‡ºæ ¼å¼
  - æ ¼å¼ç¯„ä¾‹ï¼š`çµ„åˆ¥ 1: [3,1,6,7,8], çµ„åˆ¥ 2: [2,4,9,11,13]`

## åˆ†çµ„ç®—æ³•èªªæ˜

ç³»çµ±æ¡ç”¨è²¬ä»»éˆæ¨¡å¼å¯¦ç¾åˆ†çµ„ç®—æ³•ï¼ŒæŒ‰ç…§ä»¥ä¸‹å„ªå…ˆç´šé †åºè™•ç†ï¼š

### 1. å€å¡Šåˆ†é… (BlockDistributionHandler)

- å°‡å­¸ç”ŸæŒ‰å€å¡Šï¼ˆå¦‚å‰ä¸­å¾Œæ’ï¼‰å¹³å‡åˆ†é…åˆ°å„çµ„
- ç¢ºä¿æ¯çµ„éƒ½æœ‰ä¾†è‡ªä¸åŒå€å¡Šçš„å­¸ç”Ÿ

### 2. åŒçµ„æ¢ä»¶ (SameGroupHandler)

- è™•ç†å¿…é ˆåˆ†åœ¨åŒä¸€çµ„çš„å­¸ç”Ÿçµ„åˆ
- æ”¯æ´å¤šå€‹åŒçµ„æ¢ä»¶åŒæ™‚è¨­å®š

### 3. ä¸åŒçµ„æ¢ä»¶ (DifferentGroupHandler)

- è™•ç†ä¸èƒ½åˆ†åœ¨åŒä¸€çµ„çš„å­¸ç”Ÿçµ„åˆ
- ç¢ºä¿æŒ‡å®šå­¸ç”Ÿåˆ†æ•£åˆ°ä¸åŒçµ„åˆ¥

### 4. æ€§åˆ¥æ¯”ä¾‹ (GenderRatioHandler)

- è‡ªå‹•å¹³è¡¡å„çµ„çš„ç”·å¥³æ¯”ä¾‹
- æ”¯æ´è‡ªè¨‚æ¯”ä¾‹è¨­å®š

### 5. éš¨æ©Ÿåˆ†é…

- å°‡å‰©é¤˜æœªåˆ†é…çš„å­¸ç”Ÿéš¨æ©Ÿåˆ†é…åˆ°å„çµ„
- ç¢ºä¿æ‰€æœ‰å­¸ç”Ÿéƒ½æœ‰çµ„åˆ¥

## é …ç›®çµæ§‹

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ models/                    # æ•¸æ“šæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ student.model.ts       # å­¸ç”Ÿã€çµ„åˆ¥ã€åˆ†çµ„æ¢ä»¶æ¨¡å‹
â”‚   â”‚   â””â”€â”€ grouping-handler.model.ts # è²¬ä»»éˆè™•ç†å™¨æŠ½è±¡é¡
â”‚   â”œâ”€â”€ services/                  # æœå‹™å±¤
â”‚   â”‚   â”œâ”€â”€ student.service.ts     # å­¸ç”Ÿå’Œåˆ†çµ„ç®¡ç†æœå‹™
â”‚   â”‚   â”œâ”€â”€ grouping-conditions.service.ts # åˆ†çµ„æ¢ä»¶ç®¡ç†æœå‹™
â”‚   â”‚   â””â”€â”€ handlers/             # è²¬ä»»éˆè™•ç†å™¨å¯¦ç¾
â”‚   â”‚       â”œâ”€â”€ block-distribution-handler.ts # å€å¡Šåˆ†é…è™•ç†å™¨
â”‚   â”‚       â”œâ”€â”€ same-group-handler.ts         # åŒçµ„æ¢ä»¶è™•ç†å™¨
â”‚   â”‚       â”œâ”€â”€ different-group-handler.ts    # ä¸åŒçµ„æ¢ä»¶è™•ç†å™¨
â”‚   â”‚       â””â”€â”€ gender-ratio-handler.ts       # æ€§åˆ¥æ¯”ä¾‹è™•ç†å™¨
â”‚   â”œâ”€â”€ pages/                    # é é¢çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ home/                # é¦–é  - åˆå§‹è¨­å®š
â”‚   â”‚   â””â”€â”€ grouping/            # åˆ†çµ„é é¢ - ä¸»è¦åŠŸèƒ½
â”‚   â”œâ”€â”€ components/              # å…±ç”¨çµ„ä»¶
â”‚   â”‚   â””â”€â”€ grouping-conditions-dialog/ # åˆ†çµ„æ¢ä»¶è¨­å®šå°è©±æ¡†
â”‚   â”œâ”€â”€ app.component.ts         # ä¸»çµ„ä»¶
â”‚   â””â”€â”€ app.routes.ts           # è·¯ç”±é…ç½®
â”œâ”€â”€ docs/                       # æ–‡æª”
â”‚   â””â”€â”€ architecture-diagram.md # æ¶æ§‹åœ–å’Œæµç¨‹åœ–
â”œâ”€â”€ styles.scss                # å…¨å±€æ¨£å¼
â””â”€â”€ main.ts                    # æ‡‰ç”¨å…¥å£
```

### æ ¸å¿ƒè¨­è¨ˆæ¨¡å¼

#### è²¬ä»»éˆæ¨¡å¼å¯¦ç¾

```typescript
// æŠ½è±¡è™•ç†å™¨
export abstract class GroupingHandler {
  protected nextHandler?: GroupingHandler;

  public setNext(handler: GroupingHandler): GroupingHandler {
    this.nextHandler = handler;
    return handler;
  }

  public handle(context: GroupingContext): GroupingResult {
    const result = this.process(context);

    if (!result.success && this.nextHandler) {
      return this.nextHandler.handle(context);
    }

    return result;
  }

  protected abstract process(context: GroupingContext): GroupingResult;
}
```

#### ä½¿ç”¨ç¯„ä¾‹

```typescript
// å»ºç«‹è²¬ä»»éˆ
const blockDistributionHandler = new BlockDistributionHandler();
const sameGroupHandler = new SameGroupHandler();
const differentGroupHandler = new DifferentGroupHandler();
const genderRatioHandler = new GenderRatioHandler();

// è¨­ç½®è™•ç†éˆ
blockDistributionHandler.setNext(sameGroupHandler);
sameGroupHandler.setNext(differentGroupHandler);
differentGroupHandler.setNext(genderRatioHandler);

// åŸ·è¡Œåˆ†çµ„
const result = blockDistributionHandler.handle(context);
```

## é–‹ç™¼

### æ–°å¢åˆ†çµ„è™•ç†å™¨

è¦æ–°å¢æ–°çš„åˆ†çµ„ç­–ç•¥ï¼Œåªéœ€ï¼š

1. å»ºç«‹æ–°çš„è™•ç†å™¨é¡åˆ¥ï¼Œç¹¼æ‰¿ `GroupingHandler`
2. å¯¦ç¾ `process` æ–¹æ³•
3. åœ¨ `StudentService` ä¸­å°‡æ–°è™•ç†å™¨åŠ å…¥è²¬ä»»éˆ

```typescript
export class CustomHandler extends GroupingHandler {
  protected process(context: GroupingContext): GroupingResult {
    // å¯¦ç¾è‡ªè¨‚åˆ†çµ„é‚è¼¯
    return {
      success: true,
      groups: processedGroups,
      handled: true,
      remainingStudents: remaining,
    };
  }
}
```

### æ§‹å»ºç”Ÿç”¢ç‰ˆæœ¬

```bash
bun run build
```

### é‹è¡Œæ¸¬è©¦

```bash
bun run test
```

### æª¢æŸ¥ä»£ç¢¼è³ªé‡

```bash
bun run lint
```

## ç‰¹è‰²åŠŸèƒ½

### æ‹–æ‹‰åŠŸèƒ½

- ä½¿ç”¨ Angular CDK Drag & Drop å¯¦ç¾
- æ”¯æ´å­¸ç”Ÿåœ¨çµ„åˆ¥é–“è‡ªç”±ç§»å‹•
- å³æ™‚æ›´æ–°åˆ†çµ„ç‹€æ…‹

### ç‹€æ…‹ç®¡ç†

- æ¡ç”¨ Angular Signals é€²è¡ŒéŸ¿æ‡‰å¼ç‹€æ…‹ç®¡ç†
- è‡ªå‹•åŒæ­¥ UI æ›´æ–°
- é«˜æ•ˆèƒ½çš„è®Šæ›´æª¢æ¸¬

### æ¢ä»¶è¨­å®š

- å½ˆå‡ºå¼å°è©±æ¡†é€²è¡Œæ¢ä»¶è¨­å®š
- å³æ™‚é è¦½å’Œé©—è­‰
- æ”¯æ´è¤‡é›œçš„çµ„åˆæ¢ä»¶

## æ¶æ§‹å„ªå‹¢

### å¯æ“´å±•æ€§

- è²¬ä»»éˆæ¨¡å¼ä½¿å¾—æ–°å¢åˆ†çµ„ç­–ç•¥è®Šå¾—ç°¡å–®
- æ¯å€‹è™•ç†å™¨è·è²¬å–®ä¸€ï¼Œæ˜“æ–¼æ¸¬è©¦å’Œç¶­è­·

### éˆæ´»æ€§

- å¯ä»¥å‹•æ…‹èª¿æ•´è™•ç†å™¨é †åº
- æ”¯æ´æ¢ä»¶çš„é–‹å•Ÿ/é—œé–‰
- å¯ä»¥çµ„åˆå¤šç¨®åˆ†çµ„ç­–ç•¥

### å¯ç¶­è­·æ€§

- æ¸…æ™°çš„åˆ†å±¤æ¶æ§‹
- Standalone Components é™ä½æ¨¡çµ„ä¾è³´
- Signals æä¾›ç°¡æ½”çš„ç‹€æ…‹ç®¡ç†

## æ–‡æª”

- [æ¶æ§‹åœ–å’Œæµç¨‹åœ–](docs/architecture-diagram.md) - è¦–è¦ºåŒ–çš„ç³»çµ±æ¶æ§‹èªªæ˜
- [æŠ€è¡“æ–‡æª”](docs/technical-documentation.md) - è©³ç´°çš„æŠ€è¡“å¯¦ç¾å’Œæ“´å±•æŒ‡å—
- [PRD æ–‡æª”](grouping_prd.md) - ç”¢å“éœ€æ±‚æ–‡æª”

## è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Request ä¾†æ”¹é€²é€™å€‹é …ç›®ã€‚

### é–‹ç™¼æŒ‡å—

1. Fork æœ¬å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/new-feature`)
3. éµå¾ªå°ˆæ¡ˆçš„ç·¨ç¢¼è¦ç¯„å’Œæ¶æ§‹æ¨¡å¼
4. ç¢ºä¿æ‰€æœ‰æ¸¬è©¦é€šé
5. æäº¤è®Šæ›´ (`git commit -am 'Add new feature'`)
6. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/new-feature`)
7. å»ºç«‹ Pull Request

### ç·¨ç¢¼è¦ç¯„

- ä½¿ç”¨ Standalone Components
- å„ªå…ˆä½¿ç”¨ Signals è€Œé RxJSï¼ˆé™¤éå¿…è¦ï¼‰
- çµ„ä»¶å¿…é ˆä½¿ç”¨å¤–éƒ¨ HTML å’Œ SCSS æª”æ¡ˆ
- éµå¾ªè²¬ä»»éˆæ¨¡å¼æ“´å±•åˆ†çµ„åŠŸèƒ½
- ä½¿ç”¨ Angular Material + Tailwind CSS é€²è¡Œ UI é–‹ç™¼

## æˆæ¬Š

MIT License

---

## å°ˆæ¡ˆç‰¹è‰²ç¸½çµ

âœ… **ç¾ä»£åŒ–æŠ€è¡“æ£§**: Angular 20 + Standalone Components + Signals  
âœ… **è¨­è¨ˆæ¨¡å¼**: è²¬ä»»éˆæ¨¡å¼å¯¦ç¾å¯æ“´å±•çš„åˆ†çµ„é‚è¼¯  
âœ… **ä½¿ç”¨è€…é«”é©—**: Material Design + æ‹–æ‹‰åŠŸèƒ½ + éŸ¿æ‡‰å¼è¨­è¨ˆ  
âœ… **é«˜æ•ˆèƒ½**: Bun åŸ·è¡Œç’°å¢ƒ + æœ€ä½³åŒ–çš„ç‹€æ…‹ç®¡ç†  
âœ… **å¯ç¶­è­·æ€§**: æ¸…æ™°çš„åˆ†å±¤æ¶æ§‹ + TypeScript å‹åˆ¥å®‰å…¨  
âœ… **å¯æ“´å±•æ€§**: æ¨¡çµ„åŒ–è¨­è¨ˆæ”¯æ´æ–°åŠŸèƒ½å¿«é€Ÿé–‹ç™¼
